---
sidebar_position: 1
---

# 브라우저의 동작 과정

## 브라우저 주소창에 URL을 입력하면 무슨일이 벌어질까요?

- 우리는 인터넷을 사용하며 여러 웹 사이트들을 방문하곤합니다. 웹 사이트들을 방문하기 위해 사용하는 브라우저의 주소창에 직접 주소를 입력하기도 하는데요, 브라우저 주소창에 URL을 입력하면 어떤일이 벌어지는지 한번 알아보도록 하겠습니다.

## 브라우저 동작 순서

간단하게 브라우저의 동작 순서를 나열해보자면,

1. 브라우저 주소창에 URL을 입력한다. 예) https://www.google.com/
2. 브라우저가 https://www.google.com/ 에 해당하는 실제 주소인 IP주소를 찾기위해 캐시에서 DNS기록을 확인한다.
3. 요청한 URL이 캐시에 없다면, ISP의 DNS서버가 IP주소를 찾는다.
4. 브라우저가 해당 서버와 TCP연결을 시작한다.
5. 브라우저가 웹 서버에 HTTP요청을 보낸다.
6. 서버가 요청을 처리하고 응답을 보낸다.
7. 서버가 HTTP응답을 보낸다.
8. 브라우저가 HTML 컨텐츠를 보여준다 //링크삽입

### 브라우저 주소창에 URL을 입력한다.

URL을 입력받은 브라우저는 우선 URL의 구조를 해석합니다. 어떤 프로토콜, 어느 도메인, 어느 포트로 보낼것인지 해석하게 됩니다.

![기본적인 URL구조](./assets/URL.png)

- https://www.google.com/
  - `https://` : 통신 프로토콜. 이 스키마는 브라우저에 전송 계층 보안(TLS, Transfer Layer Secure)을 사용하여 서버에 연결하도록 지시합니다. HTTPS를 사용하면 암호와 같이 위험한 정보들이 브라우저와 서버가 데이터를 교환할 때 암호화 됩니다.
    - `mailto://`, `file://`은 브라우저가 다른 방식으로 연결하도록 하는 프로토콜입니다.
  - `google.com` : 도메인 이름. 기억하기 쉬운 주소로 특정 서버의 IP주소를 가리킵니다.
  - 명시적으로 포트를 선언하지 않았다면, 브라우저에서는 설정된 기본값으로 요청하게 됩니다.
    - http -> 80포트
    - https -> 443포트

### 브라우저가 실제 주소인 IP주소를 찾기위해 캐시에서 DNS기록을 확인한다.

DNS(Domain Name System)는 인터넷 전화번호부와 같습니다. DNS는 웹사이트의 IP주소와 도메인 주소를 연결해주는 시스템입니다.
인터넷의 모든 URL에는 고유한 IP주소가 할당되어 있으며, IP주소는 액세스 요청 웹사이트의 서버를 호스트하는 컴퓨터에 속합니다.
예를 들어, www.google.com 의 IP주소는 142.250.196.110입니다. 원하는 경우 브라우저 URL에 https://142.250.196.110을 입력하여도 google.com에 접속할 수 있습니다.

DNS의 주요 목적은 사람들이 쉽게 사이트 주소를 찾을수 있도록 도와주는 것입니다. 만약 DNS가 없다면, google.com과 같이 도메인 주소가 아닌 142.250.196.110이라는 IP주소를 하나하나 외워서 사이트에 접속해야할 것입니다.

DNS 기록을 찾기위해 브라우저는 네 개의 캐시를 확인합니다.

1. DNS쿼리는 우선 브라우저 캐시를 확인합니다.
   - 브라우저는 사용자가 이전에 방문한 웹사이트의 DNS기록을 일정 기간동안 저장하고 있습니다.
2. 브라우저 OS캐시를 확인합니다.
   - 브라우저 캐시에 원하는 DNS기록이 없다면 브라우저가 내 컴퓨터 OS에 시스템 호출을 통해 DNS기록을 가져옵니다.
3. 브라우저는 라우터 캐시를 확인합니다.
   - 만약 OS에도 원하는 캐시가 없다면 브라우저는 라우터에서 DNS기록을 확인합니다.
4. 마지막으로, ISP 캐시를 확인합니다.
   - 위 단계에서 캐시에 저장된 DNS기록을 찾지 못한다면, 브라우저는 최종적으로 ISP에서 DNS기록을 확인합니다.
   - ISP(Internet Service Provider)는 DNS서버를 가지고 있는데, 해당 서버에서 DNS기록 캐시를 검색할 수 있습니다.

### 요청한 URL이 캐시에 없다면, ISP의 DNS서버가 IP주소를 찾는다.

www.google.com 이라는 주소로는 컴퓨터끼리 통신할 수 없습니다. 이를 컴퓨터가 읽을 수 있는 주소인 IP주소로 변환해야 서로 통신이 가능하게 됩니다.
브라우저에서 캐시기록을 통해 해당 URL을 찾지 못했다면 이제 DNS
